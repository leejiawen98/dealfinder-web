<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
                template="./template/loginTemplate.xhtml"
                xmlns:h="http://xmlns.jcp.org/jsf/html"
                xmlns:p="http://primefaces.org/ui"
                xmlns:f="http://xmlns.jcp.org/jsf/core">

    <ui:define name="content">
        <div style="text-align: center;">
            <h2 style="padding-top:100px">Login</h2>
            <h:form id="loginForm">
                
                <p:messages id="message" for="message" showDetail="true" severity="info" closable="true"/>
                <p:panelGrid columns="2" style="margin:0 auto">

                    <p:outputLabel for="account" value="Account Type: "/>
                    <p:selectOneMenu id="account" value="#{loginManagedBean.accountType}" style="width:150px" required="true" requiredMessage="Account Type is required" >
                        <f:validateLength minimum="4" />
                        <f:selectItem itemLabel="Select Account" itemValue="" noSelectionOption="true"/>
                        <f:selectItem itemValue= "Business" itemLabel="Business"/>
                        <f:selectItem itemValue= "Administrator" itemLabel="Administrator"/>
                    </p:selectOneMenu>
                    
                    <p:outputLabel for="username" value="Username" />
                    <p:inputText id="username" size="16" value="#{loginManagedBean.username}" required="true" requiredMessage="Username is required" maxlength="32">
                        <f:validateLength minimum="4" />
                    </p:inputText>

                    <p:outputLabel for="password" value="Password" />
                    <p:password id="password" size="16" value="#{loginManagedBean.password}" required="true" requiredMessage="Password is required" maxlength="32">
                        <f:validateLength minimum="4" />
                    </p:password>

                    <p:commandButton type="reset" value="Clear" icon="pi pi-undo" />
                    <p:commandButton type="submit" value="Login" icon="pi pi-sign-in"> 
                                     <f:ajax event="click" execute="@form" render="@form" listener="#{loginManagedBean.login}" />
                     </p:commandButton>

                </p:panelGrid>
        
                <p:growl life="2000" severity="warn,error">
                    <p:autoUpdate />
                </p:growl>
            </h:form>
            
            <h:link style="padding:20px;" outcome="/accountManagement/register" >
                <h:outputText value="Register a business account"/>
            </h:link>
        </div>
    </ui:define>

</ui:composition>
